<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>InvestOS â€” × ×•×¢× 2026</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<style>
:root{
  --bg:#07090f;--s1:#0c1018;--s2:#101520;--s3:#141a24;
  --b1:#1c2535;--b2:#243044;
  --blue:#4f8ef7;--green:#22c55e;--red:#f05252;
  --yellow:#eab308;--purple:#a855f7;--cyan:#22d3ee;
  --text:#dde4f0;--muted:#5a6a82;--dim:#2a3548;
  --font:-apple-system,'Assistant','Segoe UI',sans-serif;
}
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--font);min-height:100vh;font-size:14px}

/* â”€â”€ Header â”€â”€ */
/* â”€â”€ Asset Modal â”€â”€ */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1000;align-items:center;justify-content:center;padding:20px}
.modal-overlay.open{display:flex}
.modal-box{background:var(--s2);border:1px solid var(--b2);border-radius:14px;padding:24px 22px 20px;max-width:420px;width:100%;position:relative;direction:rtl}
.modal-close{position:absolute;top:12px;left:14px;background:none;border:none;color:var(--muted);font-size:22px;cursor:pointer;line-height:1}
.modal-close:hover{color:var(--text)}
.modal-title{font-size:16px;font-weight:800;color:var(--text);margin-bottom:10px;padding-left:24px}
.modal-desc{font-size:13px;color:#b0bec5;line-height:1.65;margin-bottom:12px}
.modal-why{font-size:12px;color:var(--cyan);background:rgba(34,211,238,.07);border:1px solid rgba(34,211,238,.18);border-radius:8px;padding:9px 12px;line-height:1.6}
.asset-row{cursor:pointer;transition:background .15s}
.asset-row:hover{background:rgba(79,142,247,.06)}
.info-hint{color:var(--blue);font-size:10px;opacity:.7;margin-right:3px}
.hdr{background:var(--s1);border-bottom:1px solid var(--b1);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:200;backdrop-filter:blur(12px)}
.hdr-logo{display:flex;align-items:center;gap:10px;cursor:pointer}
.hdr-logo-icon{width:32px;height:32px;background:linear-gradient(135deg,#4f8ef7,#a855f7);border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:15px}
.hdr-title{font-size:17px;font-weight:800;letter-spacing:-.4px}
.hdr-sub{font-size:10px;color:var(--muted)}
.hdr-r{display:flex;align-items:center;gap:14px}
.badge-on{display:flex;align-items:center;gap:5px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.25);color:var(--green);padding:3px 10px;border-radius:20px;font-size:10px;font-weight:700}
.pulse{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
.clock{font-size:11px;color:var(--muted);font-variant-numeric:tabular-nums}

/* â”€â”€ 100K Bar â”€â”€ */
.target-bar{background:linear-gradient(90deg,rgba(79,142,247,.06),rgba(168,85,247,.06));border-bottom:1px solid rgba(79,142,247,.15);padding:10px 20px}
.target-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.target-label{font-size:11px;font-weight:700;color:var(--blue)}
.target-family{font-size:10px;color:var(--muted)}
.target-track{height:7px;background:var(--b1);border-radius:4px;overflow:hidden}
.target-fill{height:100%;background:linear-gradient(90deg,var(--blue),var(--purple));border-radius:4px;transition:width 1.5s cubic-bezier(.4,0,.2,1)}
.target-stats{display:flex;gap:20px;margin-top:6px}
.tstat{font-size:10px;color:var(--muted)}
.tstat span{color:var(--text);font-weight:700}

/* â”€â”€ Main layout â”€â”€ */
.wrap{padding:16px 20px;max-width:1200px;margin:0 auto}
.view{display:none}
.view.active{display:block}

/* â”€â”€ Section title â”€â”€ */
.sec-title{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:10px;display:flex;align-items:center;gap:6px}

/* â”€â”€ Portfolio Table â”€â”€ */
.ptable{width:100%;border-collapse:collapse}
.ptable thead th{text-align:right;padding:8px 10px;font-size:10px;text-transform:uppercase;letter-spacing:.8px;color:var(--muted);border-bottom:1px solid var(--b1);font-weight:600}
.ptable tbody tr{cursor:pointer;transition:background .15s}
.ptable tbody tr:hover td{background:rgba(79,142,247,.05)}
.ptable tbody tr:hover .pname{color:var(--blue)}
.ptable td{padding:13px 10px;border-bottom:1px solid rgba(28,37,53,.8);vertical-align:middle}
.ptable tr:last-child td{border-bottom:none}
.pemoji{font-size:22px}
.pname{font-weight:700;font-size:14px;transition:color .15s}
.pstrat{font-size:10px;color:var(--muted);margin-top:2px}
.val-gross{font-size:15px;font-weight:800}
.val-net{font-size:11px;color:var(--muted);margin-top:2px}
.chg{font-size:13px;font-weight:700;padding:3px 8px;border-radius:6px;display:inline-block}
.chg-up{color:var(--green);background:rgba(34,197,94,.1)}
.chg-dn{color:var(--red);background:rgba(240,82,82,.1)}
.chg-flat{color:var(--muted);background:rgba(90,106,130,.1)}
.ptarget{font-size:11px;color:var(--muted)}
.pbar-wrap{width:80px;height:5px;background:var(--b1);border-radius:3px;overflow:hidden;margin-top:4px}
.pbar{height:100%;border-radius:3px}
.arrow-btn{color:var(--muted);font-size:12px}

/* â”€â”€ Alerts â”€â”€ */
.alerts-wrap{display:flex;flex-direction:column;gap:8px;margin-top:16px}
.alert{display:flex;align-items:flex-start;gap:10px;background:var(--s2);border:1px solid var(--b1);border-radius:8px;padding:10px 12px}
.alert-icon{font-size:16px;flex-shrink:0}
.alert-body{flex:1}
.alert-agent{font-size:10px;font-weight:700;margin-bottom:3px}
.alert-text{font-size:12px;line-height:1.5;color:var(--text)}
.alert-time{font-size:10px;color:var(--muted);margin-top:2px}
.alert.warn{border-color:rgba(234,179,8,.25);background:rgba(234,179,8,.04)}
.alert.info{border-color:rgba(79,142,247,.2);background:rgba(79,142,247,.04)}

/* â”€â”€ Detail View â”€â”€ */
.back-btn{display:flex;align-items:center;gap:6px;color:var(--blue);font-size:12px;font-weight:600;cursor:pointer;margin-bottom:14px;width:fit-content}
.back-btn:hover{opacity:.8}
.d-header{display:flex;align-items:flex-start;gap:14px;margin-bottom:16px}
.d-emoji{font-size:36px;line-height:1}
.d-name{font-size:22px;font-weight:800}
.d-strat{font-size:12px;color:var(--muted);margin-top:2px}
.d-desc{font-size:12px;color:var(--muted);margin-top:4px;line-height:1.5}

.d-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:16px}
.d-card{background:var(--s2);border:1px solid var(--b1);border-radius:8px;padding:14px}
.d-card-label{font-size:10px;text-transform:uppercase;letter-spacing:.8px;color:var(--muted);margin-bottom:6px}
.d-card-val{font-size:22px;font-weight:800}
.d-card-sub{font-size:10px;color:var(--muted);margin-top:3px}

.d-row{display:grid;grid-template-columns:1.2fr 1fr;gap:12px;margin-bottom:12px}
.card{background:var(--s2);border:1px solid var(--b1);border-radius:8px;padding:14px}

/* Sector chart */
.sector-list{margin-top:8px}
.sector-item{display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid rgba(28,37,53,.6)}
.sector-item:last-child{border:none}
.sector-dot{width:8px;height:8px;border-radius:2px;flex-shrink:0}
.sector-name{flex:1;font-size:12px}
.sector-pct{font-size:12px;font-weight:700;color:var(--text)}
.sector-bar-bg{flex:2;height:4px;background:var(--b1);border-radius:2px;overflow:hidden}
.sector-bar{height:100%;border-radius:2px}

/* Asset table */
.atable{width:100%;border-collapse:collapse;font-size:12px}
.atable th{text-align:right;padding:6px 8px;font-size:10px;text-transform:uppercase;letter-spacing:.6px;color:var(--muted);border-bottom:1px solid var(--b1);font-weight:600}
.atable td{padding:9px 8px;border-bottom:1px solid rgba(28,37,53,.6);vertical-align:middle}
.atable tr:last-child td{border:none}
.asset-name{font-weight:600}
.asset-type{font-size:10px;color:var(--muted);margin-top:1px}

/* Formula box */
.formula-box{background:rgba(168,85,247,.06);border:1px solid rgba(168,85,247,.2);border-radius:8px;padding:12px 14px;margin-top:12px}
.formula-title{font-size:10px;text-transform:uppercase;letter-spacing:.8px;color:var(--purple);margin-bottom:8px}
.formula-render{display:flex;align-items:center;justify-content:center;padding:6px 0;font-size:13px}
.formula-vals{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px}
.fval{text-align:center}
.fval-n{font-size:16px;font-weight:800}
.fval-l{font-size:10px;color:var(--muted);margin-top:2px}

/* Family Banner */
.family-banner{background:linear-gradient(135deg,rgba(79,142,247,.08),rgba(168,85,247,.08));border:1px solid rgba(79,142,247,.15);border-radius:10px;padding:16px;margin-top:16px;text-align:center}
.family-emoji{font-size:28px;margin-bottom:8px}
.family-title{font-size:16px;font-weight:800;margin-bottom:4px}
.family-sub{font-size:12px;color:var(--muted);line-height:1.6}
.family-names{display:flex;justify-content:center;gap:12px;margin-top:10px;flex-wrap:wrap}
.fname{font-size:12px;background:rgba(79,142,247,.1);border:1px solid rgba(79,142,247,.2);color:var(--blue);padding:3px 10px;border-radius:20px;font-weight:600}

/* Chart */
.chart-wrap{position:relative;height:180px;margin-top:8px}

/* Footer */
.footer{border-top:1px solid var(--b1);padding:10px 20px;display:flex;justify-content:space-between;align-items:center;font-size:10px;color:var(--dim);margin-top:20px}
.footer a{color:var(--blue);text-decoration:none}

/* Responsive */
@media(max-width:700px){
  .d-grid{grid-template-columns:1fr 1fr}
  .d-row{grid-template-columns:1fr}
  .formula-vals{grid-template-columns:repeat(2,1fr)}
  .wrap{padding:12px}
}
@media(max-width:500px){
  .d-grid{grid-template-columns:1fr}
  .hdr-sub,.clock{display:none}
}
</style>
</head>
<body>

<!-- Header -->
<div class="hdr">
  <div class="hdr-logo" onclick="showMain()">
    <div class="hdr-logo-icon">ğŸ“ˆ</div>
    <div>
      <div class="hdr-title">InvestOS</div>
      <div class="hdr-sub">×¤×™×™×œ×•×˜ Â· â‚ª500,000 Ã— 5 ×ª×™×§×™×</div>
    </div>
  </div>
  <div class="hdr-r">
    <div class="badge-on"><div class="pulse"></div>××¢×¨×›×ª ×¤×¢×™×œ×”</div>
    <div class="clock" id="clock">--:--:--</div>
  </div>
</div>

<!-- 100K Target Bar -->
<div class="target-bar">
  <div class="target-top">
    <div class="target-label">ğŸ¯ ×™×¢×“: â‚ª100,000 ×¨×•×•×— × ×§×™</div>
    <div class="target-family" id="targetFamily">×¢×‘×•×¨ ×¨×Ÿ, ××™×ª×™, × ×•×’×” ×•××œ×•×Ÿ</div>
  </div>
  <div class="target-track"><div class="target-fill" id="targetFill" style="width:0%"></div></div>
  <div class="target-stats">
    <div class="tstat">×¨×•×•×— × ×˜×• ×¢×“ ×›×”: <span id="tNetProfit">â‚ª0</span></div>
    <div class="tstat">× ×•×ª×¨: <span id="tRemaining">â‚ª100,000</span></div>
    <div class="tstat">×”×ª×§×“××•×ª: <span id="tPct">0%</span></div>
    <div class="tstat">×™×•× ×¤×™×™×œ×•×˜: <span id="tDay">1/30</span></div>
  </div>
</div>

<!-- MAIN VIEW -->
<div class="view active" id="viewMain">
<div class="wrap">

  <!-- Portfolios Table -->
  <div class="sec-title">ğŸ“Š ×—××©×ª ×”×ª×™×§×™×</div>
  <div style="background:var(--s1);border:1px solid var(--b1);border-radius:10px;overflow:hidden">
    <table class="ptable">
      <thead>
        <tr>
          <th>×ª×™×§</th>
          <th>×¢×¨×š × ×•×›×—×™ (Gross / Net)</th>
          <th>×©×™× ×•×™ ×™×•××™</th>
          <th>×™×¢×“ 30×™'</th>
          <th>×”×ª×§×“××•×ª</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="ptableBody"></tbody>
    </table>
  </div>

  <!-- Alerts from Synergy/Vibe -->
  <div style="margin-top:20px">
    <div class="sec-title">ğŸ§  ×ª×•×‘× ×•×ª ××¢×¨×›×ª</div>
    <div class="alerts-wrap" id="alertsWrap">
      <div style="color:var(--muted);font-size:12px;padding:10px 0" id="alertsEmpty">×˜×•×¢×Ÿ ×ª×•×‘× ×•×ª ××¡×•×›× ×™×...</div>
    </div>
  </div>

  <!-- Family Banner -->
  <div class="family-banner">
    <div class="family-emoji">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
    <div class="family-title">×”××˜×¨×” ×××—×•×¨×™ ×”××¡×¤×¨×™×</div>
    <div class="family-sub">â‚ª100,000 ×¨×•×•×— × ×§×™ ×¢×‘×•×¨ ×”××©×¤×—×”.<br>×›×œ â‚ª ×©× ×¦×‘×¨ â€” ××—×•×©×‘ ×œ××—×¨ ××¡ ×•×¢××œ×•×ª.</div>
    <div class="family-names">
      <span class="fname">×¨×Ÿ</span>
      <span class="fname">××™×ª×™</span>
      <span class="fname">× ×•×’×”</span>
      <span class="fname">××œ×•×Ÿ</span>
    </div>
  </div>

  <!-- Net Formula -->
  <div class="formula-box" style="margin-top:16px">
    <div class="formula-title">ğŸ“ ×¤×•×¨××•×œ×ª Ledger</div>
    <div class="formula-render" id="formulaRender"></div>
    <div class="formula-vals" id="formulaVals">
      <div class="fval"><div class="fval-n" style="color:var(--text)" id="fGross">â‚ª500,000</div><div class="fval-l">Gross (×‘×¨×•×˜×•)</div></div>
      <div class="fval"><div class="fval-n" style="color:var(--red)" id="fTax">â‚ª0</div><div class="fval-l">××¡ 25%</div></div>
      <div class="fval"><div class="fval-n" style="color:var(--red)" id="fFees">â‚ª0</div><div class="fval-l">×¢××œ×•×ª</div></div>
      <div class="fval"><div class="fval-n" style="color:var(--green)" id="fNet">â‚ª500,000</div><div class="fval-l">Net (× ×˜×•)</div></div>
    </div>
  </div>

</div>
</div><!-- /viewMain -->

<!-- DETAIL VIEW -->
<div class="view" id="viewDetail">
<div class="wrap">
  <div class="back-btn" onclick="showMain()">â† ×—×–×¨×” ×œ×›×œ×œ ×”×ª×™×§×™×</div>

  <div class="d-header">
    <div class="d-emoji" id="dEmoji">ğŸ¢</div>
    <div>
      <div class="d-name" id="dName">Solid</div>
      <div class="d-strat" id="dStrat">×©××¨× ×™</div>
      <div class="d-desc" id="dDesc">â€”</div>
    </div>
  </div>

  <!-- KPI cards -->
  <div class="d-grid">
    <div class="d-card">
      <div class="d-card-label">ğŸ’° Gross</div>
      <div class="d-card-val" id="dGross">â€”</div>
      <div class="d-card-sub">×¢×¨×š ×©×•×§ × ×•×›×—×™</div>
    </div>
    <div class="d-card">
      <div class="d-card-label">âœ… Net</div>
      <div class="d-card-val" style="color:var(--green)" id="dNet">â€”</div>
      <div class="d-card-sub">××—×¨×™ ××¡ 25% + ×¢××œ×•×ª</div>
    </div>
    <div class="d-card">
      <div class="d-card-label">ğŸ“ˆ ×©×™× ×•×™ ×™×•××™</div>
      <div class="d-card-val" id="dDaily">â€”</div>
      <div class="d-card-sub">24 ×©×¢×•×ª ××—×¨×•× ×•×ª</div>
    </div>
  </div>

  <!-- Chart + Sectors -->
  <div class="d-row">
    <div class="card">
      <div class="sec-title">ğŸ“‰ ×‘×™×¦×•×¢×™× ××•×œ ×‘× ×¦'××¨×§ (<span id="dBenchmark">â€”</span>)</div>
      <div class="chart-wrap"><canvas id="dChart"></canvas></div>
    </div>
    <div class="card">
      <div class="sec-title">ğŸ¥§ ×¤×™×œ×•×— ×¡×§×˜×•×¨×™×</div>
      <div class="sector-list" id="dSectors"></div>
    </div>
  </div>

  <!-- Assets -->
  <div class="card">
    <div class="sec-title">ğŸ—‚ ×”×¨×›×‘ × ×›×¡×™×</div>
    <table class="atable">
      <thead>
        <tr>
          <th>× ×›×¡</th>
          <th>×¡×§×˜×•×¨</th>
          <th>×¢×¨×š</th>
          <th>×”×§×¦××”</th>
          <th>×©×™× ×•×™ ×™×•××™</th>
          <th>×ª×©×•××”</th>
        </tr>
      </thead>
      <tbody id="dAssets"></tbody>
    </table>
  </div>

  <!-- Formula detail -->
  <div class="formula-box">
    <div class="formula-title">ğŸ“ ×—×™×©×•×‘ × ×˜×• â€” <span id="dPortName">â€”</span></div>
    <div class="formula-render" id="dFormulaRender"></div>
    <div class="formula-vals" id="dFormulaVals"></div>
  </div>

</div>
</div><!-- /viewDetail -->

<div class="footer">
  <span>InvestOS v0.1 Â· Pilot Â· ×›×œ ×‘×™×¦×•×¢ ××—×™×™×‘ ××™×©×•×¨ × ×•×¢× Â·
    <a href="index.html">â† BankOS</a></span>
  <span id="footerDate"></span>
</div>

<script>
// â”€â”€â”€ Constants â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const BASE = 'data/investos/';
const SECTOR_COLORS = ['#4f8ef7','#a855f7','#22c55e','#eab308','#22d3ee','#f05252','#fb923c','#e879f9'];
let portfolios = [];
let detailChart = null;

// â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ils = v => v == null ? 'â€”' : 'â‚ª' + Math.round(v).toLocaleString('he-IL');
const pct = (v, digits=2) => v == null ? 'â€”' : (v > 0 ? '+' : '') + v.toFixed(digits) + '%';
const load = async f => { try { const r = await fetch(BASE+f+'?t='+Date.now()); return r.ok?r.json():null; } catch { return null; } };

// â”€â”€â”€ Clock â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function tick() {
  const now = new Date();
  document.getElementById('clock').textContent = now.toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
  document.getElementById('footerDate').textContent = now.toLocaleDateString('he-IL',{weekday:'long',day:'numeric',month:'long',year:'numeric'});
}
setInterval(tick,1000); tick();

// â”€â”€â”€ KaTeX formula â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderFormula(el) {
  if (!el) return;
  try { katex.render('\\text{Net} = \\text{Gross} - (\\text{Profit} \\times 0.25) - \\text{Fees}', el, {throwOnError:false}); }
  catch { el.textContent = 'Net = Gross âˆ’ (Profit Ã— 0.25) âˆ’ Fees'; }
}

// â”€â”€â”€ Change badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function chgBadge(v) {
  if (v === 0 || v == null) return `<span class="chg chg-flat">0.00%</span>`;
  return v > 0
    ? `<span class="chg chg-up">â–² ${pct(v)}</span>`
    : `<span class="chg chg-dn">â–¼ ${pct(v)}</span>`;
}

// â”€â”€â”€ Compute net â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function computeNet(p) {
  const profit = Math.max(0, p.gross - p.initial_capital);
  const tax = profit * 0.25;
  const fees = p.fees || 0;
  return { gross: p.gross, profit, tax, fees, net: p.gross - tax - fees };
}

// â”€â”€â”€ Target Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderTarget(data) {
  const netProfit = data.net_profit_to_date || 0;
  const target = data.target_net_profit || 100000;
  const pctVal = Math.min(100, (netProfit / target) * 100);
  document.getElementById('targetFill').style.width = pctVal + '%';
  document.getElementById('tNetProfit').textContent = ils(netProfit);
  document.getElementById('tRemaining').textContent = ils(Math.max(0, target - netProfit));
  document.getElementById('tPct').textContent = pctVal.toFixed(1) + '%';
  document.getElementById('tDay').textContent = (data.pilot_day||1) + '/30';
  // Global formula
  const totalGross = data.portfolios?.reduce((s,p)=>s+p.gross,0)||500000;
  const totalNetCalc = data.portfolios?.reduce((s,p)=>s+computeNet(p).net,0)||500000;
  const totalProfit = data.portfolios?.reduce((s,p)=>s+computeNet(p).profit,0)||0;
  const totalTax = totalProfit * 0.25;
  const totalFees = data.portfolios?.reduce((s,p)=>s+(p.fees||0),0)||0;
  document.getElementById('fGross').textContent = ils(totalGross);
  document.getElementById('fTax').textContent = 'âˆ’' + ils(totalTax);
  document.getElementById('fFees').textContent = 'âˆ’' + ils(totalFees);
  document.getElementById('fNet').textContent = ils(totalNetCalc);
}

// â”€â”€â”€ Portfolio Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderTable(data) {
  portfolios = data.portfolios;
  const tbody = document.getElementById('ptableBody');
  tbody.innerHTML = portfolios.map((p, i) => {
    const {gross, net, tax, fees} = computeNet(p);
    const progress = Math.max(0, ((gross - p.initial_capital) / (p.initial_capital * p.target_30d_pct / 100)) * 100);
    const barColor = progress > 75 ? 'var(--green)' : progress > 30 ? 'var(--blue)' : 'var(--yellow)';
    return `<tr onclick="showDetail(${i})">
      <td>
        <div style="display:flex;align-items:center;gap:10px">
          <div class="pemoji">${p.emoji}</div>
          <div>
            <div class="pname">${p.name}</div>
            <div class="pstrat">${p.strategy}</div>
          </div>
        </div>
      </td>
      <td>
        <div class="val-gross">${ils(gross)}</div>
        <div class="val-net">(${ils(net)} × ×˜×•)</div>
      </td>
      <td>${chgBadge(p.daily_change_pct)}</td>
      <td>
        <div class="ptarget" style="color:var(--text)">${pct(p.target_30d_pct,0)}</div>
        <div class="ptarget">${p.benchmark}</div>
      </td>
      <td>
        <div class="ptarget">${progress.toFixed(0)}% ××”×™×¢×“</div>
        <div class="pbar-wrap"><div class="pbar" style="width:${Math.min(100,progress)}%;background:${barColor}"></div></div>
      </td>
      <td class="arrow-btn">â€º</td>
    </tr>`;
  }).join('');
}

// â”€â”€â”€ Detail View â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showDetail(idx) {
  const p = portfolios[idx];
  if (!p) return;
  document.getElementById('viewMain').classList.remove('active');
  document.getElementById('viewDetail').classList.add('active');
  window.scrollTo(0,0);
  const {gross, net, tax, fees, profit} = computeNet(p);

  document.getElementById('dEmoji').textContent = p.emoji;
  document.getElementById('dName').textContent = p.name;
  document.getElementById('dStrat').textContent = p.strategy;
  document.getElementById('dDesc').textContent = p.description;
  document.getElementById('dGross').textContent = ils(gross);
  document.getElementById('dNet').textContent = ils(net);
  document.getElementById('dDaily').innerHTML = chgBadge(p.daily_change_pct);
  document.getElementById('dBenchmark').textContent = p.benchmark;
  document.getElementById('dPortName').textContent = p.name;

  // Sectors
  const secs = Object.entries(p.sectors||{});
  document.getElementById('dSectors').innerHTML = secs.map(([name,pctV],i)=>`
    <div class="sector-item">
      <div class="sector-dot" style="background:${SECTOR_COLORS[i%SECTOR_COLORS.length]}"></div>
      <div class="sector-name">${name}</div>
      <div class="sector-bar-bg"><div class="sector-bar" style="width:${pctV}%;background:${SECTOR_COLORS[i%SECTOR_COLORS.length]}"></div></div>
      <div class="sector-pct">${pctV}%</div>
    </div>`).join('');

  // Assets table
  document.getElementById('dAssets').innerHTML = (p.assets||[]).map(a=>{
    const ret = ((a.value - a.cost_basis) / a.cost_basis) * 100;
    return `<tr class="asset-row" onclick="showAssetInfo('${a.ticker}','${a.name.replace(/'/g,"\\'")}')">
      <td><div class="asset-name">${a.name}</div><div class="asset-type">${a.ticker} <span class="info-hint">â„¹</span></div></td>
      <td style="color:var(--muted)">${a.sector}</td>
      <td>${ils(a.value)}</td>
      <td>${a.allocation_pct}%</td>
      <td>${chgBadge(a.daily_change_pct||0)}</td>
      <td style="color:${ret>=0?'var(--green)':'var(--red)'}">${pct(ret)}</td>
    </tr>`;
  }).join('');

  // Formula
  renderFormula(document.getElementById('dFormulaRender'));
  document.getElementById('dFormulaVals').innerHTML = `
    <div class="fval"><div class="fval-n" style="color:var(--text)">${ils(gross)}</div><div class="fval-l">Gross</div></div>
    <div class="fval"><div class="fval-n" style="color:var(--red)">âˆ’${ils(tax)}</div><div class="fval-l">××¡ 25%</div></div>
    <div class="fval"><div class="fval-n" style="color:var(--red)">âˆ’${ils(fees)}</div><div class="fval-l">×¢××œ×•×ª</div></div>
    <div class="fval"><div class="fval-n" style="color:var(--green)">${ils(net)}</div><div class="fval-l">Net</div></div>`;

  // Performance chart
  buildChart(p);
}

function buildChart(p) {
  const ctx = document.getElementById('dChart');
  if (detailChart) { detailChart.destroy(); detailChart=null; }
  const history = p.performance_history || [{date:'2026-02-23',value:p.initial_capital}];
  const labels = history.map(h => h.date);
  const vals = history.map(h => h.value);
  const benchVals = history.map(h => p.initial_capital); // flat benchmark for day 1
  detailChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [
        { label: p.name, data: vals, borderColor: '#4f8ef7', backgroundColor: 'rgba(79,142,247,.08)', borderWidth: 2, pointRadius: 3, tension: 0.4, fill: true },
        { label: p.benchmark, data: benchVals, borderColor: '#a855f7', borderWidth: 1.5, borderDash: [4,3], pointRadius: 0, tension: 0.4 }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { labels: { color:'#5a6a82', font:{size:10} } }, tooltip: { callbacks: { label: ctx => ils(ctx.parsed.y) } } },
      scales: {
        x: { ticks: { color:'#5a6a82', font:{size:9} }, grid: { color:'rgba(28,37,53,.8)' } },
        y: { ticks: { color:'#5a6a82', font:{size:9}, callback: v => 'â‚ª'+Math.round(v/1000)+'K' }, grid: { color:'rgba(28,37,53,.8)' } }
      }
    }
  });
}

function showMain() {
  document.getElementById('viewDetail').classList.remove('active');
  document.getElementById('viewMain').classList.add('active');
  window.scrollTo(0,0);
}

// â”€â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function renderAlerts() {
  const d = await load('insights.json');
  const wrap = document.getElementById('alertsWrap');
  if (!d) return;
  const items = [d.latest, ...(d.history||[])].filter(Boolean);
  if (!items.length) {
    wrap.innerHTML = '<div style="color:var(--muted);font-size:12px;padding:8px 0">××™×Ÿ ×ª×•×‘× ×•×ª ×¢×“×™×™×Ÿ â€” ×”×¡×•×›× ×™× ×˜×¨× ×”×•×¤×¢×œ×•.</div>';
    return;
  }
  const agentColors = { Synergy:'var(--blue)', Trader:'var(--yellow)', Hunter:'var(--cyan)', Vibe:'var(--purple)', InvestOS:'var(--green)' };
  const agentIcons = { Synergy:'ğŸ”¬', Trader:'ğŸ“', Hunter:'ğŸ”­', Vibe:'ğŸ¨', InvestOS:'âš™ï¸' };
  const levelClass = { warn:'warn', alert:'warn', info:'info' };
  wrap.innerHTML = items.map(item => {
    const agent = item.agent || 'InvestOS';
    const color = agentColors[agent] || 'var(--muted)';
    const icon = agentIcons[agent] || 'ğŸ’¡';
    const cls = levelClass[item.level] || 'info';
    const ts = item.timestamp ? new Date(item.timestamp).toLocaleString('he-IL') : '×¢×“×›×•×Ÿ ××—×¨×•×Ÿ';
    return `<div class="alert ${cls}">
      <div class="alert-icon">${icon}</div>
      <div class="alert-body">
        <div class="alert-agent" style="color:${color}">${agent}</div>
        <div class="alert-text">${item.text}</div>
        <div class="alert-time">${ts}${item.action_taken ? ' Â· ' + item.action_taken : ''}</div>
      </div>
    </div>`;
  }).join('');
}

async function init() {
  const data = await load('portfolios.json');
  if (!data) return;
  renderTarget(data);
  renderTable(data);
  renderFormula(document.getElementById('formulaRender'));
  await renderAlerts();
}
init();
setInterval(init, 300000); // refresh every 5 min

// â”€â”€â”€ Asset Info Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STOCK_INFO = {
  CSPX: {
    title: "iShares Core S&P 500 UCITS ETF",
    desc: "×ª×¢×•×“×ª ×¡×œ ××™×¨×™×ª ×”×¢×•×§×‘×ª ××—×¨ 500 ×”×—×‘×¨×•×ª ×”×’×“×•×œ×•×ª ×‘××¨×”\"×‘. × ×¡×—×¨×ª ×‘×‘×•×¨×¡×ª ×œ×•× ×“×•×Ÿ ×‘×“×•×œ×¨×™×, ×•××¡×¤×§×ª ×—×©×™×¤×” ×œ×›×œ×›×œ×” ×”×××¨×™×§××™×ª ×‘×¢××œ×ª × ×™×”×•×œ ×©×œ 0.07% ×‘×œ×‘×“.",
    why: "× ×‘×—×¨×” ×‘×’×œ×œ ×™×ª×¨×•×Ÿ ××™×¡×•×™×™: ××¡ ×“×™×‘×™×“× ×“ 15% ×‘×œ×‘×“ (××× ×ª ××¡ ××™×¨×œ× ×“â€“××¨×”\"×‘) ×œ×¢×•××ª 25% ×‘×§×¨×Ÿ ×™×©×¨××œ×™×ª â€” ×—×™×¡×›×•×Ÿ ×©×œ ×›-0.13% ×œ×©× ×”."
  },
  LUMI: {
    title: "×‘× ×§ ×œ××•××™ ×œ×™×©×¨××œ",
    desc: "×”×‘× ×§ ×”×©× ×™ ×‘×’×•×“×œ×• ×‘×™×©×¨××œ, ×¢× × ×•×›×—×•×ª ×‘×™× ×œ××•××™×ª ×‘××¨×”\"×‘ ×•××™×¨×•×¤×”. ××¦×™×¢ ×©×™×¨×•×ª×™ ×‘× ×§××•×ª ×§××¢×•× ××™×ª, ×¢×¡×§×™×ª ×•×”×©×§×¢×•×ª.",
    why: "× ×‘×—×¨ ×›××¨×›×™×‘ ×©××¨× ×™ ×‘×ª×™×§ Solid â€” ×‘× ×§×™× ×™×©×¨××œ×™×™× × ×”× ×™× ××¡×‘×™×‘×ª ×¨×™×‘×™×ª ×’×‘×•×”×” ×•××¡×™×›×•×Ÿ ××™× ×™××œ×™ ×©×œ ×¤×©×™×˜×ª ×¨×’×œ."
  },
  POLI: {
    title: "×‘× ×§ ×”×¤×•×¢×œ×™×",
    desc: "×”×‘× ×§ ×”×’×“×•×œ ×‘×™×•×ª×¨ ×‘×™×©×¨××œ ×‘××•× ×—×™ × ×›×¡×™×, ×¢× × ×ª×— ×©×•×§ ×©×œ ×›-30%. ××¦×™×¢ ×©×™×¨×•×ª×™× ×¤×™× × ×¡×™×™× ××œ××™× ×œ×¤×¨×˜×™×™× ×•×¢×¡×§×™×.",
    why: "××’×•×•×Ÿ ×¢× ×œ××•××™ ×›×“×™ ×œ×¤×¨×•×¡ ×¢×œ ×©× ×™ ×”×‘× ×§×™× ×”×’×“×•×œ×™× â€” ×”×¤×—×ª×ª ×¡×™×›×•×Ÿ ×¡×¤×¦×™×¤×™ ×ª×•×š ×©××™×¨×” ×¢×œ ×—×©×™×¤×” ×œ×¡×§×˜×•×¨ ×”×¤×™× × ×¡×™ ×”×™×©×¨××œ×™."
  },
  CHKP: {
    title: "Check Point Software Technologies",
    desc: "×—×‘×¨×ª ××‘×˜×—×ª ×¡×™×™×‘×¨ ×™×©×¨××œ×™×ª ×‘×¨××©×™×ª. ××¤×ª×—×ª ××•×¦×¨×™ ×”×’× ×” ×œ×¨×©×ª×•×ª, ×¢× ×Ÿ ×•× ×§×•×“×•×ª ×§×¦×”. ××¢×œ 100,000 ×œ×§×•×—×•×ª ××¨×’×•× ×™×™× ×‘×¨×—×‘×™ ×”×¢×•×œ×.",
    why: "× ×‘×—×¨×” ×‘×’×œ×œ ×¤×¨×•×¤×™×œ ×”×¨×•×•×—×™×•×ª ×”×’×‘×•×” (××¨×•×•×— × ×§×™ ~30%) ×•×™×¦×™×‘×•×ª ×”×›× ×¡×•×ª ×—×•×–×¨×•×ª ××¨×™×©×™×•× ×•×ª. ×”×’× ×” ×˜×‘×¢×™×ª ×‘×¢×ª×•×ª ××™-×•×“××•×ª."
  },
  NVDA: {
    title: "NVIDIA Corporation",
    desc: "×—×‘×¨×ª ×©×‘×‘×™× ×××¨×™×§××™×ª ×”××•×‘×™×œ×” ××ª ×©×•×§ ×”-GPU ×œ×‘×™× ×” ××œ××›×•×ª×™×ª, ××—×©×•×‘ ×¢× ×Ÿ ×•××©×—×§×™ ××—×©×‘. ××¢×‘×“×™ H100 ×•-A100 ×©×œ×” ×”× ×”×¡×˜× ×“×¨×˜ ×”×ª×¢×©×™×™×ª×™ ×œ-AI.",
    why: "×—×©×™×¤×” ×™×©×™×¨×” ×œ×’×œ ×”-AI â€” ×›×œ ×—×‘×¨×” ×’×“×•×œ×” ×©×‘×•× ×” ××•×“×œ×™ ×©×¤×” ×¦×•×¨×›×ª NVDA GPUs. ×¤×•×˜× ×¦×™××œ ×¦××™×—×” ×’×‘×•×” ×¢× ×ª× ×•×“×ª×™×•×ª ×’×‘×•×”×” ×‘×”×ª××."
  },
  NICE: {
    title: "NICE Systems",
    desc: "×—×‘×¨×ª ×ª×•×›× ×” ×™×©×¨××œ×™×ª ×¢× ×”×ª××—×•×ª ×‘-CX (×—×•×•×™×™×ª ×œ×§×•×—), ×× ×œ×™×˜×™×§×ª ×§×•×œ ×•×ª×•×›× ×•×ª ×¦×™×•×ª ×¤×™× × ×¡×™. ×¤×•×¢×œ×ª ×‘-150+ ××“×™× ×•×ª, ×”×›× ×¡×•×ª ×©× ×ª×™×•×ª ×©×œ $2.3 ××™×œ×™××¨×“.",
    why: "×—×‘×¨×ª SaaS ×™×©×¨××œ×™×ª ×‘×•×’×¨×ª ×¢× ×›-90% ×”×›× ×¡×•×ª ×—×•×–×¨×•×ª â€” ×××–× ×ª ××ª ×¡×™×›×•×Ÿ NVDA ×¢× ×™×¦×™×‘×•×ª ×ª×–×¨×™××™×ª ×‘×ª×™×§ ×”××’×¨×¡×™×‘×™."
  },
  SPEN: {
    title: "Sapiens International Corporation",
    desc: "×—×‘×¨×ª ×ª×•×›× ×” ×™×©×¨××œ×™×ª ×”××ª××—×” ×‘×¤×ª×¨×•× ×•×ª ×œ×—×‘×¨×•×ª ×‘×™×˜×•×— ×•×¤×™× × ×¡×™×. ××¦×™×¢×” ××¢×¨×›×•×ª ×œ×™×‘×” ×œ×—×™×ª×•×, ×ª×‘×™×¢×•×ª ×•×¢×¡×§×™ ×‘×™×˜×•×— ×—×™×™×.",
    why: "Fintech ×™×©×¨××œ×™ ×¢× ×—×©×™×¤×” ×œ×©×•×§ ×”×‘×™×˜×•×— ×”×’×œ×•×‘×œ×™ â€” ×¤×•×˜× ×¦×™××œ ×¦××™×—×” ×‘×“×™×’×™×˜×¦×™×” ×©×œ ×—×‘×¨×•×ª ×‘×™×˜×•×— ××¡×•×¨×ª×™×•×ª."
  },
  TEVA: {
    title: "Teva Pharmaceutical Industries",
    desc: "×—×‘×¨×ª ×”×ª×¨×•×¤×•×ª ×”×’× ×¨×™×•×ª ×”×’×“×•×œ×” ×‘×¢×•×œ×, ××§×•×¨×” ×‘×™×©×¨××œ. ××•×›×¨×ª ×ª×¨×•×¤×•×ª ×‘-60+ ××“×™× ×•×ª ×¢× ××•×¦×¨×™ ×“×’×œ ×›×•×œ×œ Copaxone ×•-AJOVY ×œ×˜×™×¤×•×œ ×‘××™×’×¨× ×”.",
    why: "××¡×—×¨ ×§×•× ×˜×¨×¨×™×× ×™ â€” Teva ×¢×‘×¨×” ×ª×”×œ×™×š ××¨×•×š ×©×œ ×”×•×¨×“×ª ×—×•×‘ ×•×©×™×§×•×. ×¤×•×˜× ×¦×™××œ rebound ×¢× ×§×˜×œ×•×’ ×ª×¨×•×¤×•×ª ×’× ×¨×™×•×ª ×—×–×§."
  },
  AMOT: {
    title: "×××•×ª ×”×©×§×¢×•×ª (REIT)",
    desc: "×§×¨×Ÿ ×”×©×§×¢×•×ª × ×“×œ\"×Ÿ ×× ×™×‘ ×”×’×“×•×œ×” ×‘×™×©×¨××œ. ××—×–×™×§×” ×‘-3.5 ××™×œ×™×•×Ÿ ×\"×¨ ×©×œ × ×›×¡×™× ××¡×—×¨×™×™×, ×œ×•×’×™×¡×˜×™×™× ×•××©×¨×“×™×, ×‘×¢×™×§×¨ ×‘××¨×›×– ×”××¨×¥.",
    why: "××¨×›×™×‘ × ×“×œ\"×Ÿ ×™×¦×™×‘ ×‘×ª×™×§ ×”×¡×¤×§×•×œ×˜×™×‘×™ â€” ×”×›× ×¡×•×ª ×©×›×™×¨×•×ª ×§×‘×•×¢×•×ª ××’× ×•×ª ×‘×ª×§×•×¤×•×ª ×—×•×œ×©×” ×‘×©×•×§ ×”×× ×™×•×ª."
  },
  PLTR: {
    title: "Palantir Technologies",
    desc: "×—×‘×¨×ª × ×™×ª×•×— × ×ª×•× ×™× ×•×‘×™× ×” ××œ××›×•×ª×™×ª ×××¨×™×§××™×ª. ××•×¦×¨×™ ×”×“×’×œ (Gotham, Foundry, AIP) ××©××©×™× ×××©×œ×•×ª, ×¦×‘××•×ª ×•×ª××’×™×“×™× ×œ× ×™×ª×•×— ××™×“×¢ ××•×¨×›×‘.",
    why: "×—×©×™×¤×” ×œ-AI ×‘×™×˜×—×•× ×™ â€” ×”×‘×™×§×•×© ×œ××•×¦×¨×™×” ×’×“×œ ×¢× ×’×œ ×”××™× ×˜×’×¨×¦×™×” ×©×œ AI ×‘×§×‘×œ×ª ×”×—×œ×˜×•×ª ×××©×œ×ª×™×•×ª ×•×¢×¡×§×™×•×ª."
  },
  TQQQ: {
    title: "ProShares UltraPro QQQ (3x Leveraged)",
    desc: "×ª×¢×•×“×ª ×¡×œ ×××•× ×¤×ª ×”××›×¤×™×œ×” ×¤×™ 3 ××ª ×ª×©×•××ª ××“×“ × ××¡×“\"×§ 100 ×™×•××™×ª. ××›×™×œ×” ×‘×¢×™×§×¨ ×—×‘×¨×•×ª ×˜×›× ×•×œ×•×’×™×” ×’×“×•×œ×•×ª (Apple, NVDA, Microsoft).",
    why: "×× ×•×¢ ×¦××™×—×” ××’×¨×¡×™×‘×™ ×œ-Super-Agg â€” ×× ×¦×œ ×ª×§×•×¤×•×ª bull market ×‘× ××¡×“\"×§. ×× ×•×”×œ ×¢× × ×™×˜×•×¨ ×”×“×•×§ ×‘×’×œ×œ decay ×‘×ª× ×•×“×ª×™×•×ª ×’×‘×•×”×”."
  },
  ESLT: {
    title: "Elbit Systems",
    desc: "×¢× ×§×™×ª ×”×‘×™×˜×—×•×Ÿ ×”×™×©×¨××œ×™×ª. ××¤×ª×—×ª ×•××™×™×¦×¨×ª ××¢×¨×›×•×ª ××œ×§×˜×¨×•× ×™×§×” ×œ×¦×‘××•×ª â€” ××–×œ\"×˜×™×, ××¢×¨×›×•×ª ×©×“×” ×§×¨×‘, ××œ×§×˜×¨×•-××•×¤×˜×™×§×” ×•×ª×§×©×•×¨×ª ×˜×§×˜×™×ª.",
    why: "×× ×¦×œ×ª ×‘×™×§×•×© ×¢×•×œ××™ ×’×•×‘×¨ ×œ×¦×™×•×“ ×‘×™×˜×—×•× ×™ â€” ×œ×§×•×—×•×ª ×‘-100+ ××“×™× ×•×ª. ××’×Ÿ ×˜×‘×¢×™ ×‘×ª×™×§ ×‘-Super-Agg ×‘×–××Ÿ ××™-×™×¦×™×‘×•×ª ×’×™××•×¤×•×œ×™×˜×™×ª."
  },
  ENRG: {
    title: "Energix Renewable Energy",
    desc: "×—×‘×¨×ª ×× ×¨×’×™×” ××ª×—×“×©×ª ×™×©×¨××œ×™×ª ×”××¤×ª×—×ª ×•××¤×¢×™×œ×” ×©×“×•×ª ×¨×•×— ×•×× ×¨×’×™×” ×¡×•×œ××¨×™×ª. ×¤×•×¢×œ×ª ×‘×™×©×¨××œ, ××¨×”\"×‘, ×¤×•×œ×™×Ÿ ×•××•×§×¨××™× ×”.",
    why: "×—×©×™×¤×” ×œ×’×œ ×”×× ×¨×’×™×” ×”×™×¨×•×§×” ×”×’×œ×•×‘×œ×™ â€” ×”×›× ×¡×•×ª ×—×•×–×¨×•×ª ××—×•×–×™ PPA ××¨×•×›×™-×˜×•×•×— ××¢× ×™×§×•×ª ×¦×¤×™×•×ª ×ª×–×¨×™××™×ª ×’×‘×•×”×”."
  },
  RSEL: {
    title: "Rafael Development Corporation",
    desc: "×–×¨×•×¢ ××¡×—×¨×™×ª ×©×œ ×¨×¤××œ â€” ×ª×¢×©×™×™×ª ×”×‘×™×˜×—×•×Ÿ ×”×××©×œ×ª×™×ª ×”×™×©×¨××œ×™×ª. ××¤×ª×—×ª ×˜×›× ×•×œ×•×’×™×•×ª ×‘×™×˜×—×•× ×™×•×ª ×›×•×œ×œ ×›×™×¤×ª ×‘×¨×–×œ, ×¡×¤×™×™×§ ×•××¢×¨×›×•×ª ×™×.",
    why: "×—×©×™×¤×” ×™×™×—×•×“×™×ª ×œ×ª×¢×©×™×™×ª ×”×‘×™×˜×—×•×Ÿ ×”×™×©×¨××œ×™×ª ×¢× ×§×©×¨×™ ×××©×œ×” ×—×–×§×™× ×•×¤×™×¤×œ×™×™×Ÿ ×”×–×× ×•×ª ××¨×•×š."
  },
  VXUS: {
    title: "Vanguard Total International Stock ETF",
    desc: "×ª×¢×•×“×ª ×¡×œ ×©×œ Vanguard ×”××›×¡×” ~8,000 ×× ×™×•×ª ××—×•×¥ ×œ××¨×”\"×‘ â€” ××™×¨×•×¤×”, ××¡×™×”, ×©×•×•×§×™× ××ª×¢×•×¨×¨×™×. ×¢××œ×ª × ×™×”×•×œ 0.07%.",
    why: "×’×™×•×•×Ÿ ×’×™××•×’×¨×¤×™ â€” ××’×Ÿ ××¤× ×™ ×¨×™×›×•×–-×™×ª×¨ ×‘×©×•×§ ×”×××¨×™×§××™ ×•×× ×¦×œ ×¦××™×—×” ×‘×©×•×•×§×™× ×‘×™× ×œ××•××™×™×."
  },
  TSLA: {
    title: "Tesla Inc",
    desc: "×™×¦×¨× ×™×ª ×¨×›×‘ ×—×©××œ×™ ×•×× ×¨×’×™×”. ××•×›×¨×ª Model S/3/X/Y/Cybertruck, ××¢×¨×›×•×ª ××—×¡×•×Ÿ ×× ×¨×’×™×” (Powerwall) ×•×¤×× ×œ×™× ×¡×•×œ××¨×™×™×. ××•×‘×™×œ ×©×•×§ ×”-EV.",
    why: "×§×•× ×˜×¨×¨×™××Ÿ â€” ×× ×™×” ×ª× ×•×“×ª×™×ª ×¢× beta ×’×‘×•×” ×©×× ×™×¢×” ××ª ×ª×™×§ Creative ×‘×¢×œ×™×•×ª. ×× ×•×¢ ×ª×©×•××” ×¢× ×’×™×“×•×¨ ×—×œ×§×™ ×‘-CASH."
  },
  CASH: {
    title: "××–×•××Ÿ â‚ª",
    desc: "×¨×–×¨×‘×ª ××–×•××Ÿ ×‘×©×§×œ×™× ×™×©×¨××œ×™× ×”×××ª×™× ×” ×œ×”×–×“×× ×•×™×•×ª ×”×©×§×¢×”.",
    why: "×©×•××¨ ×¢×œ ×’××™×©×•×ª ×œ× ×™×¦×•×œ ×™×¨×™×“×•×ª ×—×“×•×ª ×•××§×˜×™×Ÿ ×ª× ×•×“×ª×™×•×ª ×›×•×œ×œ×ª ×©×œ ×”×ª×™×§."
  }
};

function showAssetInfo(ticker, name) {
  const info = STOCK_INFO[ticker];
  const modal = document.getElementById('assetModal');
  const title = document.getElementById('modalTitle');
  const desc = document.getElementById('modalDesc');
  const why = document.getElementById('modalWhy');

  title.textContent = info ? info.title : name;
  desc.textContent = info ? info.desc : '××™×“×¢ ×œ× ×–××™×Ÿ ×¢×‘×•×¨ × ×™×™×¨ ×–×”.';
  why.textContent = info ? 'ğŸ’¡ ' + info.why : '';
  why.style.display = info ? 'block' : 'none';

  modal.classList.add('open');
}

function closeAssetModal() {
  document.getElementById('assetModal').classList.remove('open');
}
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') closeAssetModal();
});
</script>

<!-- Asset Info Modal -->
<div id="assetModal" class="modal-overlay" onclick="if(event.target===this)closeAssetModal()">
  <div class="modal-box">
    <button class="modal-close" onclick="closeAssetModal()" aria-label="×¡×’×•×¨">Ã—</button>
    <div id="modalTitle" class="modal-title"></div>
    <div id="modalDesc" class="modal-desc"></div>
    <div id="modalWhy" class="modal-why"></div>
  </div>
</div>

</body>
</html>
